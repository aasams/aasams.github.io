<!DOCTYPE html>
<html>
  <head>
    <title>Terminal.js Demo</title>
    <link rel="stylesheet" href="terminal.css">
    <style>
      body {
        background: black;
        color:      white;
        
        width:  100%;
        height: 100%;
        
        padding: 0;
        margin:  0;
        
        box-sizing: border-box;        
      }
    </style>
  </head>
  <body>
    <h1>Terminal.js Demo</h1>
    <div id="terminal">
      <p>Type 'help' to get started.</p>
      <p class="hidden">
        <span class="prompt">guest@terminal.js &sim; &gt; </span>
        <span contenteditable="true" class="input"> </span>
      </p>
    </div>
    <script src="terminal.js"></script>
    <script>
    
      var password = "secret"
      var rootCreated = false
      var commands = {};
      var cmds = "<div>" +
                     "<ul>" +
                     "<li><strong>ERROR</strong> - no command specified, try installctl help </li>" +
                     "</ul></div>";
      var help = "<div>" +
                     "<ul>" +
                     "<li><strong>install -root=ROOT -password=Pass -override[Default=False]</strong> - install program to root </li>" +
                     "<li><strong>remove</strong> - uninstall the program </li>" +
                     "</ul></div>";

      commands.installctl = function(args) {
        args = parseArgs(args)
        console.log(args)
        if(args.length < 2) return cmds;
        if (args[1] == "help") return help;
        if (args[1] == "install") return handleInstall(args); 
      };
      commands.mk = function(args) {
        args = parseArgs(args)
        console.log(args)
        if(args.length < 2) {return "<p>Hello. Why don't you tell me your name?</p>";}

        return "Hello " + args[1];
        // if(args.length < 2) return "<p> mkdir path </p>";
        // if(args[1] == "/root/program") {
        //   rootCreated = true
        // }
        // return "<p> Created it" + args[1] + "</p>"
      };

      commands.create = function(args) {
        if(args.length < 2) return "<p>Hello. Why don't you tell me your name?</p>";
        return "Hello " + args[1];
      };
      commands.hi = function(args) {
        console.log(args)
        if(args.length < 2) return "<p>Hello. Why don't you tell me your name?</p>";
        return "Hello " + args[1];
      };

      // Start at args[2] 
      handleInstall = function(args) {
        if (args.length < 3) return "<div>" +
                              "<ul>" +
                              "<li><strong> Usage: </strong>" + 
                              "<li><strong>install -root=ROOT -password=Pass -override</strong> - install program" +
                              "<li><strong>root [Required]</strong> - Program Root" +
                              "<li><strong>password [Required] </strong> - System Password Required for install" +
                              "<li><strong>override [Optional] </strong> - Re-install if prior install was aborted" +
                              "</ul></div>";
        
        // for (var i=2; i<args.length; i++){

        // }                    
      };

      // iterate remove "" and return as an array.
      parseArgs = function (args) {
        return Array.from(args).filter(function(i) { return i != "";});
      }

      Terminal.init(document.getElementById("terminal"), commands);
    </script>
  </body>
</html>
